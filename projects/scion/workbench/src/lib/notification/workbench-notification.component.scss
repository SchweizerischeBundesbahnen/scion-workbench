@use '../common/workbench.mixin';

$padding-inline: 1.5em;

:host {
  display: flex;
  flex-direction: column;
  gap: .75em;
  background-color: var(--sci-color-background-elevation);
  color: var(--sci-color-text);
  font-size: .9em;
  border: 1px solid var(--sci-color-border);
  border-radius: var(--sci-corner);
  box-shadow: var(--sci-elevation) var(--sci-static-color-black);
  padding: 1em 0;
  overflow: hidden;
  outline: none;
  position: relative; // positioning context for close button and severity

  // Severity indicator
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    width: var(--sci-workbench-notification-severity-indicator-size);
  }

  &[data-severity="info"]::before {
    background-color: var(--sci-color-accent);
  }

  &[data-severity="warn"]::before {
    background-color: var(--sci-color-notice);
  }

  &[data-severity="error"]::before {
    background-color: var(--sci-color-negative);
  }

  > header {
    flex: none;
    font-weight: bold;
    padding: 0 $padding-inline;
    word-break: break-word; // wrap unbreakable text at message box bounds
    white-space: pre-line;
  }

  > div.slot {
    flex: auto;
    overflow: hidden;
    display: grid;

    &.text {
      word-break: break-word; // wrap unbreakable text at message box bounds
      white-space: pre-line;
      padding: 0 $padding-inline;
    }

    > sci-viewport {
      &::part(content) {
        position: relative; // positioning context for slot bounds.
        padding: 0 $padding-inline;
      }

      > div.slot-bounds {
        position: absolute;
        inset: 0 $padding-inline; // padding of viewport
        visibility: hidden;
      }
    }
  }

  > button.close:is(button, #sci-reset) {
    @include workbench.icon-button-element-states() {
      position: absolute;
      top: .275em;
      right: .275em;
      padding: .125em;
      border-radius: var(--sci-corner-small);
      font-size: 1rem;
    }
  }
}
